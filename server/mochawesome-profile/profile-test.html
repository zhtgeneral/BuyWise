<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:2,&quot;tests&quot;:7,&quot;passes&quot;:7,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-07-02T01:50:50.218Z&quot;,&quot;end&quot;:&quot;2025-07-02T01:50:50.410Z&quot;,&quot;duration&quot;:192,&quot;testsRegistered&quot;:7,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;84e99be0-76bf-4357-aa62-9705b6f888e2&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\profile.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\profile.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cb7b0b4f-3279-405e-8064-896b923e4b21&quot;,&quot;title&quot;:&quot;Profile API&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\profile.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\profile.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Profile API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Profile API \&quot;before all\&quot; hook in \&quot;Profile API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;app = (0, express_1.default)();\napp.use(express_1.default.json());\napp.use(&#x27;/api/profiles&#x27;, profile_1.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e5ed382-ba55-47a7-b775-e6d643e0fb35&quot;,&quot;parentUUID&quot;:&quot;cb7b0b4f-3279-405e-8064-896b923e4b21&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Profile API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Profile API \&quot;after each\&quot; hook in \&quot;Profile API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon_1.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a2330a0-0801-4a53-a75a-716c1dad6aae&quot;,&quot;parentUUID&quot;:&quot;cb7b0b4f-3279-405e-8064-896b923e4b21&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e9b927ab-c5b4-4947-ad5c-9f878268e648&quot;,&quot;title&quot;:&quot;/api/profiles/resend-verification POST&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\profile.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\profile.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 for missing email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 400 for missing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:80,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({})\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;email is required&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b6d7f52-9a42-43d0-a69b-d5cac2b646c4&quot;,&quot;parentUUID&quot;:&quot;e9b927ab-c5b4-4947-ad5c-9f878268e648&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for non string email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 400 for non string email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: 123 })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;email must be a string&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e46cbbe1-a156-4aff-8d6b-13bf6e1dcda7&quot;,&quot;parentUUID&quot;:&quot;e9b927ab-c5b4-4947-ad5c-9f878268e648&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for unknown error while getting user&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 500 for unknown error while getting user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).throws(new Error(\&quot;Some error related to getting user\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: &#x27;test@example.com&#x27; })\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unable to get user while verifying email&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e03df11f-2fdd-4946-afd8-14d67d46502e&quot;,&quot;parentUUID&quot;:&quot;e9b927ab-c5b4-4947-ad5c-9f878268e648&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 for unknown user&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 404 for unknown user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(null);\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: &#x27;test@example.com&#x27; })\n                .expect(404);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;user cannot be found&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9c88b54-81be-4419-abb2-7e14acd15bd2&quot;,&quot;parentUUID&quot;:&quot;e9b927ab-c5b4-4947-ad5c-9f878268e648&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for user with verified email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 400 for user with verified email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeUserWithoutPassword = {\n                _id: &#x27;existing_id&#x27;,\n                name: &#x27;Existing User&#x27;,\n                email: &#x27;existing@example.com&#x27;,\n                password: &#x27;hashed_password&#x27;,\n                isEmailVerified: true\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(fakeUserWithoutPassword);\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: &#x27;test@example.com&#x27; })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;email is already verified&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59873609-f6ce-4c1b-855a-6c5b8df4a3c7&quot;,&quot;parentUUID&quot;:&quot;e9b927ab-c5b4-4947-ad5c-9f878268e648&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for unknown error during resending verification email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 500 for unknown error during resending verification email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeUserWithoutPassword = {\n                _id: &#x27;existing_id&#x27;,\n                name: &#x27;Existing User&#x27;,\n                email: &#x27;existing@example.com&#x27;,\n                password: &#x27;hashed_password&#x27;,\n                isEmailVerified: false\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(fakeUserWithoutPassword);\n            sinon_1.default.stub(UserService_1.UserService, &#x27;resendVerificationEmail&#x27;).throws(new Error(\&quot;Some error related to resending verification email\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: &#x27;test@example.com&#x27; })\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unable to resend verification email&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7bcae0e8-cb7f-4170-b39c-674257d4487f&quot;,&quot;parentUUID&quot;:&quot;e9b927ab-c5b4-4947-ad5c-9f878268e648&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 200 for successfully resending email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 200 for successfully resending email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeUserWithoutPassword = {\n                _id: &#x27;existing_id&#x27;,\n                name: &#x27;Existing User&#x27;,\n                email: &#x27;existing@example.com&#x27;,\n                password: &#x27;hashed_password&#x27;,\n                isEmailVerified: false\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(fakeUserWithoutPassword);\n            sinon_1.default.stub(UserService_1.UserService, &#x27;resendVerificationEmail&#x27;).resolves();\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: &#x27;test@example.com&#x27; })\n                .expect(200);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: true,\n                message: &#x27;Verification email sent&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c742e2d7-b6e3-426f-be0d-fac0a5c89d33&quot;,&quot;parentUUID&quot;:&quot;e9b927ab-c5b4-4947-ad5c-9f878268e648&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3b6d7f52-9a42-43d0-a69b-d5cac2b646c4&quot;,&quot;e46cbbe1-a156-4aff-8d6b-13bf6e1dcda7&quot;,&quot;e03df11f-2fdd-4946-afd8-14d67d46502e&quot;,&quot;c9c88b54-81be-4419-abb2-7e14acd15bd2&quot;,&quot;59873609-f6ce-4c1b-855a-6c5b8df4a3c7&quot;,&quot;7bcae0e8-cb7f-4170-b39c-674257d4487f&quot;,&quot;c742e2d7-b6e3-426f-be0d-fac0a5c89d33&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:167,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:20000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.7.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;profile-test&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;mochawesome-profile&quot;,&quot;reportFilename&quot;:&quot;profile-test&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;profile-test&quot;,&quot;reportDir&quot;:&quot;mochawesome-profile&quot;,&quot;reportTitle&quot;:&quot;server&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-profile\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\mochawesome-profile\\profile-test.json&quot;,&quot;htmlFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\mochawesome-profile\\profile-test.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>