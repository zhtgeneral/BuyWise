<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:14,&quot;tests&quot;:69,&quot;passes&quot;:64,&quot;pending&quot;:0,&quot;failures&quot;:5,&quot;start&quot;:&quot;2025-07-02T20:36:08.720Z&quot;,&quot;end&quot;:&quot;2025-07-02T20:36:19.043Z&quot;,&quot;duration&quot;:10323,&quot;testsRegistered&quot;:69,&quot;passPercent&quot;:92.7536231884058,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;33f79871-c5e2-4018-a1b8-8d4fd51f15cb&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6356d5f4-3856-4b94-9177-fa521b0eeeff&quot;,&quot;title&quot;:&quot;Auth API&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\auth.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\auth.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API \&quot;before all\&quot; hook in \&quot;Auth API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;app = (0, express_1.default)();\napp.use(express_1.default.json());\napp.use(&#x27;/api/auth&#x27;, auth_1.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27401211-5b97-4dae-891e-6a43a0e9f901&quot;,&quot;parentUUID&quot;:&quot;6356d5f4-3856-4b94-9177-fa521b0eeeff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Auth API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API \&quot;after each\&quot; hook in \&quot;Auth API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon_1.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;482c9c2d-8d3a-47c4-832b-dba4e88d5c31&quot;,&quot;parentUUID&quot;:&quot;6356d5f4-3856-4b94-9177-fa521b0eeeff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;title&quot;:&quot;/api/auth/register POST&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\auth.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\auth.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 for missing name&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/register POST should return 400 for missing name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/register&#x27;)\n                .send({\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;password123&#x27;\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;name, email and password are required&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc77c3e5-2904-40b7-807c-5dc1cea38746&quot;,&quot;parentUUID&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for missing email&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/register POST should return 400 for missing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/register&#x27;)\n                .send({\n                name: &#x27;test name&#x27;,\n                password: &#x27;password123&#x27;\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;name, email and password are required&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6c38714-c2dd-4ec4-b65c-fb4344a74658&quot;,&quot;parentUUID&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for missing password&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/register POST should return 400 for missing password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/register&#x27;)\n                .send({\n                name: &#x27;test name&#x27;,\n                email: &#x27;test@example.com&#x27;,\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;name, email and password are required&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81ec49be-05ce-4937-bca1-dfec6c92f440&quot;,&quot;parentUUID&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for non string name&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/register POST should return 400 for non string name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/register&#x27;)\n                .send({\n                name: 123,\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;password123&#x27;\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;name, email and password need to be strings&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52bf9e51-6091-44d6-8492-b0bdead58662&quot;,&quot;parentUUID&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for non string email&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/register POST should return 400 for non string email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/register&#x27;)\n                .send({\n                name: &#x27;test name&#x27;,\n                email: 123,\n                password: &#x27;password123&#x27;\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;name, email and password need to be strings&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b68378b3-a800-4cfc-8eaf-9b45bf5583b0&quot;,&quot;parentUUID&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for non string password&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/register POST should return 400 for non string password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/register&#x27;)\n                .send({\n                name: &#x27;test name&#x27;,\n                email: &#x27;test@example.com&#x27;,\n                password: 123\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;name, email and password need to be strings&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cadd43e5-9c8f-48fc-ae60-9479b301c542&quot;,&quot;parentUUID&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for failed email validation&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/register POST should return 500 for failed email validation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).throws(new Error(\&quot;Error related to searching user with email\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/register&#x27;)\n                .send({\n                name: &#x27;test user&#x27;,\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;password123&#x27;\n            })\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unable to determine validity of email&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb4c4788-0a1f-492f-a1af-bed7bbc9b750&quot;,&quot;parentUUID&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for existing account&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/register POST should return 400 for existing account&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves({\n                _id: &#x27;existing_id&#x27;,\n                name: &#x27;Existing User&#x27;,\n                email: &#x27;existing@example.com&#x27;,\n                password: &#x27;hashed_password&#x27;,\n                isEmailVerified: true\n            });\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/register&#x27;)\n                .send({\n                name: &#x27;test user&#x27;,\n                email: &#x27;existing@example.com&#x27;,\n                password: &#x27;password123&#x27;\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Email already exists. Pleast try logging in instead&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e90b6011-4ee7-4319-9a5e-0af0cedf609b&quot;,&quot;parentUUID&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for failed register&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/register POST should return 500 for failed register&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(null);\n            sinon_1.default.stub(authService_1.AuthService, &#x27;register&#x27;).throws(new Error(\&quot;Unknown error in register\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/register&#x27;)\n                .send({\n                name: &#x27;test user&#x27;,\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;password123&#x27;\n            })\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Registration failed. Please try again&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba335309-7c51-4c1a-b0cd-907c4da18066&quot;,&quot;parentUUID&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 201 on successful register&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/register POST should return 201 on successful register&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeUser = {\n                _id: &#x27;test user id&#x27;,\n                name: &#x27;test user&#x27;,\n                email: &#x27;test@example.com&#x27;,\n                isEmailVerified: true,\n                verificationToken: &#x27;test token&#x27;,\n                verificationTokenExpires: (new Date(Date.now() + 24 * 60 * 60 * 1000)).toISOString(),\n                createdAt: (new Date()).toISOString(),\n                updatedAt: (new Date()).toISOString(),\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(null);\n            sinon_1.default.stub(authService_1.AuthService, &#x27;register&#x27;).resolves({\n                token: &#x27;123abc&#x27;,\n                user: fakeUser\n            });\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/register&#x27;)\n                .send({\n                name: &#x27;test user&#x27;,\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;password123&#x27;\n            })\n                .expect(201);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: true,\n                message: &#x27;Registration successful! Your account has been created and verified&#x27;,\n                data: fakeUser,\n                token: &#x27;123abc&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd640ea7-8aa2-4f1f-9c1c-1e349feb1c1a&quot;,&quot;parentUUID&quot;:&quot;b904cab2-17ce-4fd8-819d-1a8b725c35e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc77c3e5-2904-40b7-807c-5dc1cea38746&quot;,&quot;a6c38714-c2dd-4ec4-b65c-fb4344a74658&quot;,&quot;81ec49be-05ce-4937-bca1-dfec6c92f440&quot;,&quot;52bf9e51-6091-44d6-8492-b0bdead58662&quot;,&quot;b68378b3-a800-4cfc-8eaf-9b45bf5583b0&quot;,&quot;cadd43e5-9c8f-48fc-ae60-9479b301c542&quot;,&quot;cb4c4788-0a1f-492f-a1af-bed7bbc9b750&quot;,&quot;e90b6011-4ee7-4319-9a5e-0af0cedf609b&quot;,&quot;ba335309-7c51-4c1a-b0cd-907c4da18066&quot;,&quot;fd640ea7-8aa2-4f1f-9c1c-1e349feb1c1a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:116,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;42f66b8a-406f-4409-b4b6-5dd67704395c&quot;,&quot;title&quot;:&quot;/api/auth/login POST&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\auth.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\auth.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 for missing email&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/login POST should return 400 for missing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/login&#x27;)\n                .send({\n                password: &#x27;hashed-password&#x27;\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: \&quot;Email and password are required\&quot;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97b1c928-fd2d-47da-ba62-2eb6138ca25d&quot;,&quot;parentUUID&quot;:&quot;42f66b8a-406f-4409-b4b6-5dd67704395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for missing password&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/login POST should return 400 for missing password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/login&#x27;)\n                .send({\n                email: \&quot;test@example.com\&quot;\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: \&quot;Email and password are required\&quot;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8725c96-918d-4524-a0fd-c82025029dba&quot;,&quot;parentUUID&quot;:&quot;42f66b8a-406f-4409-b4b6-5dd67704395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for non string email&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/login POST should return 400 for non string email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/login&#x27;)\n                .send({\n                email: 123,\n                password: &#x27;test-hash&#x27;\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: \&quot;Email and password must be strings\&quot;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5b5a236-0822-4c80-bbf4-d22bb54ca4ed&quot;,&quot;parentUUID&quot;:&quot;42f66b8a-406f-4409-b4b6-5dd67704395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for non string password&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/login POST should return 400 for non string password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/login&#x27;)\n                .send({\n                email: &#x27;test@example.com&#x27;,\n                password: 123\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: \&quot;Email and password must be strings\&quot;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6ff19d7-edbc-49f9-afd0-27cdffd4c8f7&quot;,&quot;parentUUID&quot;:&quot;42f66b8a-406f-4409-b4b6-5dd67704395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 for bad email&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/login POST should return 401 for bad email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(null);\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/login&#x27;)\n                .send({\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;test-hash&#x27;\n            })\n                .expect(401);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: \&quot;Invalid email or password\&quot;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b45d5d3f-7894-4615-86bb-59b480104253&quot;,&quot;parentUUID&quot;:&quot;42f66b8a-406f-4409-b4b6-5dd67704395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 for unverified email&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/login POST should return 401 for unverified email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const unverifiedUser = {\n                name: &#x27;test name&#x27;,\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;test-hash&#x27;,\n                isEmailVerified: false\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(unverifiedUser);\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/login&#x27;)\n                .send({\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;test-hash&#x27;\n            })\n                .expect(401);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: \&quot;Please verify your email before logging in\&quot;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57e877eb-a119-4ebf-8268-cfd391533393&quot;,&quot;parentUUID&quot;:&quot;42f66b8a-406f-4409-b4b6-5dd67704395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for unknown error during login&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/login POST should return 500 for unknown error during login&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const userWithPassword = {\n                _id: &#x27;test_id&#x27;,\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;test-hash&#x27;,\n                isEmailVerified: true\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(userWithPassword);\n            sinon_1.default.stub(authService_1.AuthService, &#x27;login&#x27;).throws(new Error(\&quot;Some error during login\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/login&#x27;)\n                .send({\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;test-hash&#x27;\n            })\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: \&quot;Unknown authentication error\&quot;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e322ebe5-3130-4f23-9cca-2a3a4b13ff6f&quot;,&quot;parentUUID&quot;:&quot;42f66b8a-406f-4409-b4b6-5dd67704395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 200 with token and user for successful login&quot;,&quot;fullTitle&quot;:&quot;Auth API /api/auth/login POST should return 200 with token and user for successful login&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const userWithPassword = {\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;hashed-password&#x27;,\n                isEmailVerified: true,\n            };\n            const { password } = userWithPassword, userWithoutPassword = __rest(userWithPassword, [\&quot;password\&quot;]);\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(userWithPassword);\n            sinon_1.default.stub(authService_1.AuthService, &#x27;login&#x27;).resolves({\n                token: &#x27;token123&#x27;,\n                user: userWithoutPassword\n            });\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/auth/login&#x27;)\n                .send({\n                email: &#x27;test@example.com&#x27;,\n                password: &#x27;hashed-password&#x27;\n            })\n                .expect(200);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: true,\n                message: &#x27;Login successful&#x27;,\n                data: userWithoutPassword,\n                token: &#x27;token123&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e94787b-c1f8-4b0e-9da4-400a15a1b15f&quot;,&quot;parentUUID&quot;:&quot;42f66b8a-406f-4409-b4b6-5dd67704395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;97b1c928-fd2d-47da-ba62-2eb6138ca25d&quot;,&quot;d8725c96-918d-4524-a0fd-c82025029dba&quot;,&quot;f5b5a236-0822-4c80-bbf4-d22bb54ca4ed&quot;,&quot;a6ff19d7-edbc-49f9-afd0-27cdffd4c8f7&quot;,&quot;b45d5d3f-7894-4615-86bb-59b480104253&quot;,&quot;57e877eb-a119-4ebf-8268-cfd391533393&quot;,&quot;e322ebe5-3130-4f23-9cca-2a3a4b13ff6f&quot;,&quot;1e94787b-c1f8-4b0e-9da4-400a15a1b15f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:49,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;600a9b50-83b9-40ee-b78d-fac5cf6380a8&quot;,&quot;title&quot;:&quot;Chat API&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chat.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\chat.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Chat API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Chat API \&quot;before all\&quot; hook in \&quot;Chat API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;app = (0, express_1.default)();\napp.use(express_1.default.json());\napp.use(&#x27;/api/chat&#x27;, chat_1.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d90da39-5fcd-4bfb-930d-753b90e2971e&quot;,&quot;parentUUID&quot;:&quot;600a9b50-83b9-40ee-b78d-fac5cf6380a8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Chat API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Chat API \&quot;after each\&quot; hook in \&quot;Chat API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon_1.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af6c9e1f-7677-480f-97e5-e2f55aa51376&quot;,&quot;parentUUID&quot;:&quot;600a9b50-83b9-40ee-b78d-fac5cf6380a8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;title&quot;:&quot;/api/chat POST&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chat.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\chat.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 for missing messages&quot;,&quot;fullTitle&quot;:&quot;Chat API /api/chat POST should return 400 for missing messages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chat&#x27;)\n                .send({\n                email: &#x27;test@example.com&#x27;\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;messages and email required&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4983c38f-ad7a-4614-bca2-7c585d8f233d&quot;,&quot;parentUUID&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for missing email&quot;,&quot;fullTitle&quot;:&quot;Chat API /api/chat POST should return 400 for missing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chat&#x27;)\n                .send({\n                messages: [\n                    {\n                        speaker: &#x27;user&#x27;,\n                        text: &#x27;first message&#x27;\n                    },\n                    {\n                        speaker: &#x27;bot&#x27;,\n                        text: &#x27;first reply&#x27;\n                    }\n                ]\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;messages and email required&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8a01130-2853-439b-ba81-9279c8fbe1e0&quot;,&quot;parentUUID&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for non string email&quot;,&quot;fullTitle&quot;:&quot;Chat API /api/chat POST should return 400 for non string email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chat&#x27;)\n                .send({\n                email: 123,\n                messages: [\n                    {\n                        speaker: &#x27;user&#x27;,\n                        text: &#x27;first message&#x27;\n                    },\n                    {\n                        speaker: &#x27;bot&#x27;,\n                        text: &#x27;first reply&#x27;\n                    }\n                ]\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;email needs to be a string&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac620cb0-c31a-4fcd-a203-f1d57aefd114&quot;,&quot;parentUUID&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for non array messages&quot;,&quot;fullTitle&quot;:&quot;Chat API /api/chat POST should return 400 for non array messages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chat&#x27;)\n                .send({\n                email: &#x27;text@example.com&#x27;,\n                messages: &#x27;filler&#x27;\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;messages needs to be an array&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bd50079-4962-4c0e-bab8-511bcfb711f0&quot;,&quot;parentUUID&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for missing text in messages&quot;,&quot;fullTitle&quot;:&quot;Chat API /api/chat POST should return 400 for missing text in messages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chat&#x27;)\n                .send({\n                email: &#x27;text@example.com&#x27;,\n                messages: [\n                    {\n                        speaker: &#x27;bot&#x27;,\n                        text: &#x27;first message&#x27;\n                    },\n                    {\n                        speaker: &#x27;user&#x27;,\n                    },\n                ]\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Invalid speaker or text found on message&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;332b5e6f-e1a4-4c9f-b13e-3e0c03739626&quot;,&quot;parentUUID&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for missing speaker in messages&quot;,&quot;fullTitle&quot;:&quot;Chat API /api/chat POST should return 400 for missing speaker in messages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chat&#x27;)\n                .send({\n                email: &#x27;text@example.com&#x27;,\n                messages: [\n                    {\n                        speaker: &#x27;bot&#x27;,\n                        text: &#x27;first message&#x27;\n                    },\n                    {\n                        text: &#x27;first reply&#x27;\n                    },\n                ]\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Invalid speaker or text found on message&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d48fb2c2-995e-4da3-9351-270efd4f7815&quot;,&quot;parentUUID&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for invalid speaker in messages&quot;,&quot;fullTitle&quot;:&quot;Chat API /api/chat POST should return 400 for invalid speaker in messages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chat&#x27;)\n                .send({\n                email: &#x27;text@example.com&#x27;,\n                messages: [\n                    {\n                        speaker: &#x27;bot&#x27;,\n                        text: &#x27;first message&#x27;\n                    },\n                    {\n                        speaker: &#x27;NOT A BOT OR A USER&#x27;,\n                        text: &#x27;first reply&#x27;\n                    }\n                ]\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Invalid speaker or text found on message&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;981779cd-0148-4cbf-b604-69f9a260325f&quot;,&quot;parentUUID&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for non string text in messages&quot;,&quot;fullTitle&quot;:&quot;Chat API /api/chat POST should return 400 for non string text in messages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chat&#x27;)\n                .send({\n                email: &#x27;text@example.com&#x27;,\n                messages: [\n                    {\n                        speaker: &#x27;bot&#x27;,\n                        text: &#x27;first message&#x27;\n                    },\n                    {\n                        speaker: &#x27;user&#x27;,\n                        text: 12345\n                    }\n                ]\n            })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Invalid speaker or text found on message&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;569f7988-308b-486a-b424-e26275723def&quot;,&quot;parentUUID&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for failed save chat&quot;,&quot;fullTitle&quot;:&quot;Chat API /api/chat POST should return 500 for failed save chat&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(ChatService_1.ChatService, &#x27;saveChat&#x27;).throws(new Error(\&quot;Some error in save chat\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chat&#x27;)\n                .send({\n                email: &#x27;text@example.com&#x27;,\n                messages: [\n                    {\n                        speaker: &#x27;bot&#x27;,\n                        text: &#x27;first message&#x27;\n                    },\n                    {\n                        speaker: &#x27;user&#x27;,\n                        text: &#x27;first reply&#x27;\n                    }\n                ]\n            })\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unable to save chat&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a41943f5-4b55-421a-805a-f1af53451169&quot;,&quot;parentUUID&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 200 for working save chat&quot;,&quot;fullTitle&quot;:&quot;Chat API /api/chat POST should return 200 for working save chat&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const testDate = new Date(&#x27;2025-06-30T01:14:27.853Z&#x27;).toISOString();\n            const messagesData = [\n                {\n                    speaker: &#x27;bot&#x27;,\n                    text: &#x27;first message&#x27;,\n                    timestamp: testDate\n                },\n                {\n                    speaker: &#x27;user&#x27;,\n                    text: &#x27;first reply&#x27;,\n                    timestamp: testDate\n                }\n            ];\n            const mockChat = {\n                messages: messagesData,\n                email: &#x27;text@example.com&#x27;,\n                createdAt: testDate\n            };\n            sinon_1.default.stub(ChatService_1.ChatService, &#x27;saveChat&#x27;).resolves(mockChat);\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chat&#x27;)\n                .send({\n                email: &#x27;text@example.com&#x27;,\n                messages: messagesData\n            })\n                .expect(201);\n            (0, chai_1.expect)(response.body).to.deep.equal(mockChat);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcfacfa8-83c1-43b5-8558-d228552a4a8d&quot;,&quot;parentUUID&quot;:&quot;d0d85642-667d-4791-b530-19919dfea087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4983c38f-ad7a-4614-bca2-7c585d8f233d&quot;,&quot;d8a01130-2853-439b-ba81-9279c8fbe1e0&quot;,&quot;ac620cb0-c31a-4fcd-a203-f1d57aefd114&quot;,&quot;1bd50079-4962-4c0e-bab8-511bcfb711f0&quot;,&quot;332b5e6f-e1a4-4c9f-b13e-3e0c03739626&quot;,&quot;d48fb2c2-995e-4da3-9351-270efd4f7815&quot;,&quot;981779cd-0148-4cbf-b604-69f9a260325f&quot;,&quot;569f7988-308b-486a-b424-e26275723def&quot;,&quot;a41943f5-4b55-421a-805a-f1af53451169&quot;,&quot;fcfacfa8-83c1-43b5-8558-d228552a4a8d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:89,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;47b29d29-2423-48cd-925c-c715efd9fe57&quot;,&quot;title&quot;:&quot;Chatbot API&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chatbot.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\chatbot.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Chatbot API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Chatbot API \&quot;before all\&quot; hook in \&quot;Chatbot API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;app = (0, express_1.default)();\napp.use(express_1.default.json());\napp.post(&#x27;/api/chatbot&#x27;, chatbot_1.postChat);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c9523ed-4ddf-4e45-aa19-977355dbd2bf&quot;,&quot;parentUUID&quot;:&quot;47b29d29-2423-48cd-925c-c715efd9fe57&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Chatbot API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Chatbot API \&quot;after each\&quot; hook in \&quot;Chatbot API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon_1.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f402907-aebc-48a4-a96f-b41f95ee0866&quot;,&quot;parentUUID&quot;:&quot;47b29d29-2423-48cd-925c-c715efd9fe57&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6675d7ff-219c-4ef1-997d-ffa6fc1ce9d1&quot;,&quot;title&quot;:&quot;/api/chatbot POST&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chatbot.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\chatbot.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns 400 code for missing message&quot;,&quot;fullTitle&quot;:&quot;Chatbot API /api/chatbot POST returns 400 code for missing message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chatbot&#x27;)\n                .send({})\n                .expect(400);\n            expect(response.body).to.deep.equal({ error: &#x27;Message is required&#x27; });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21f90b84-f550-44b6-b98d-fbca61ce1317&quot;,&quot;parentUUID&quot;:&quot;6675d7ff-219c-4ef1-997d-ffa6fc1ce9d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 400 code for wrong data type&quot;,&quot;fullTitle&quot;:&quot;Chatbot API /api/chatbot POST returns 400 code for wrong data type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chatbot&#x27;)\n                .send({ message: 0 })\n                .expect(400);\n            expect(response.body).to.deep.equal({ error: &#x27;Message is required&#x27; });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64ff9ead-69b9-441d-aa37-a34d04b790b5&quot;,&quot;parentUUID&quot;:&quot;6675d7ff-219c-4ef1-997d-ffa6fc1ce9d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 400 code for empty message&quot;,&quot;fullTitle&quot;:&quot;Chatbot API /api/chatbot POST returns 400 code for empty message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chatbot&#x27;)\n                .send({ message: \&quot;\&quot; })\n                .expect(400);\n            expect(response.body).to.deep.equal({ error: &#x27;Message is required&#x27; });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebae96fb-8fa2-43f3-93df-81a409fc292b&quot;,&quot;parentUUID&quot;:&quot;6675d7ff-219c-4ef1-997d-ffa6fc1ce9d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 500 code for failed chatbot API call&quot;,&quot;fullTitle&quot;:&quot;Chatbot API /api/chatbot POST returns 500 code for failed chatbot API call&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2809,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(AIService_1.AIService, &#x27;chatCompletionGithubModel&#x27;).throws(new Error(\&quot;some API error message\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chatbot&#x27;)\n                .send({ message: \&quot;hi\&quot; })\n                .expect(500);\n            expect(response.body).to.deep.equal({ error: &#x27;Unable to call chatbot API&#x27; });\n        })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: expected 500 \&quot;Internal Server Error\&quot;, got 200 \&quot;OK\&quot;&quot;,&quot;estack&quot;:&quot;Error: expected 500 \&quot;Internal Server Error\&quot;, got 200 \&quot;OK\&quot;\n    at D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chatbot.test.ts:68:10\n    at Generator.next (&lt;anonymous&gt;)\n    at D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chatbot.test.ts:41:71\n    at new Promise (&lt;anonymous&gt;)\n    at __awaiter (src\\tests\\integration\\chatbot.test.ts:37:12)\n    at Context.&lt;anonymous&gt; (src\\tests\\integration\\chatbot.test.ts:63:67)\n    at processImmediate (node:internal/timers:485:21)\n----\n    at Test._assertStatus (node_modules\\supertest\\lib\\test.js:267:14)\n    at D:\\Uni\\C455\\Project\\team10\\server\\node_modules\\supertest\\lib\\test.js:323:13\n    at Test._assertFunction (node_modules\\supertest\\lib\\test.js:300:13)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:179:23)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:135:14)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at Server.emit (node:domain:489:12)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)&quot;},&quot;uuid&quot;:&quot;d388638f-7749-44d6-aee8-8b17e81401cd&quot;,&quot;parentUUID&quot;:&quot;6675d7ff-219c-4ef1-997d-ffa6fc1ce9d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 500 code for incomplete chatbot response&quot;,&quot;fullTitle&quot;:&quot;Chatbot API /api/chatbot POST returns 500 code for incomplete chatbot response&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1741,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(AIService_1.AIService, &#x27;chatCompletionGithubModel&#x27;).resolves({\n                chatbotMessage: \&quot;\&quot;,\n                productRequested: false,\n                productQuery: \&quot;\&quot;\n            });\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chatbot&#x27;)\n                .send({ message: \&quot;give me an incomplete response\&quot; })\n                .expect(500);\n            expect(response.body).to.deep.equal({ error: &#x27;AI unable to respond&#x27; });\n        })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: expected 500 \&quot;Internal Server Error\&quot;, got 200 \&quot;OK\&quot;&quot;,&quot;estack&quot;:&quot;Error: expected 500 \&quot;Internal Server Error\&quot;, got 200 \&quot;OK\&quot;\n    at D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chatbot.test.ts:83:10\n    at Generator.next (&lt;anonymous&gt;)\n    at D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chatbot.test.ts:41:71\n    at new Promise (&lt;anonymous&gt;)\n    at __awaiter (src\\tests\\integration\\chatbot.test.ts:37:12)\n    at Context.&lt;anonymous&gt; (src\\tests\\integration\\chatbot.test.ts:73:71)\n    at processImmediate (node:internal/timers:485:21)\n----\n    at Test._assertStatus (node_modules\\supertest\\lib\\test.js:267:14)\n    at D:\\Uni\\C455\\Project\\team10\\server\\node_modules\\supertest\\lib\\test.js:323:13\n    at Test._assertFunction (node_modules\\supertest\\lib\\test.js:300:13)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:179:23)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:135:14)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at Server.emit (node:domain:489:12)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)&quot;},&quot;uuid&quot;:&quot;58af1dda-6a06-45a7-a6c2-8473a3066346&quot;,&quot;parentUUID&quot;:&quot;6675d7ff-219c-4ef1-997d-ffa6fc1ce9d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 200 code for working chatbot API without products&quot;,&quot;fullTitle&quot;:&quot;Chatbot API /api/chatbot POST returns 200 code for working chatbot API without products&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2057,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(AIService_1.AIService, &#x27;chatCompletionGithubModel&#x27;).resolves({\n                chatbotMessage: \&quot;What would you like to search for?\&quot;,\n                productRequested: false,\n                productQuery: \&quot;\&quot;\n            });\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chatbot&#x27;)\n                .send({ message: \&quot;test message\&quot; })\n                .expect(200);\n            expect(response.body).to.deep.equal({\n                chatbotMessage: \&quot;What would you like to search for?\&quot;,\n                productData: null\n            });\n        })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { (2) } to deeply equal { (2) }&quot;,&quot;estack&quot;:&quot;AssertionError: expected { (2) } to deeply equal { (2) }\n    at D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chatbot.test.ts:99:37\n    at Generator.next (&lt;anonymous&gt;)\n    at fulfilled (src\\tests\\integration\\chatbot.test.ts:38:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot; {\n-   \&quot;chatbotMessage\&quot;: \&quot;I&#x27;m here to help you find the perfect laptops, phones, or computers! What specific device are you interested in today?\&quot;\n+   \&quot;chatbotMessage\&quot;: \&quot;What would you like to search for?\&quot;\n   \&quot;productData\&quot;: [null]\n }\n&quot;},&quot;uuid&quot;:&quot;afc9ba79-dfb4-4946-899d-fcb0d851a469&quot;,&quot;parentUUID&quot;:&quot;6675d7ff-219c-4ef1-997d-ffa6fc1ce9d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 200 code for working chatbot API and failed product API&quot;,&quot;fullTitle&quot;:&quot;Chatbot API /api/chatbot POST returns 200 code for working chatbot API and failed product API&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1328,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(AIService_1.AIService, &#x27;chatCompletionGithubModel&#x27;).resolves({\n                chatbotMessage: \&quot;Here are some macbooks I found.\&quot;,\n                productRequested: true,\n                productQuery: \&quot;macbook\&quot;\n            });\n            sinon_1.default.stub(ProductService_1.ProductService, &#x27;searchProducts&#x27;).throws(new Error(\&quot;some API error message\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chatbot&#x27;)\n                .send({ message: \&quot;I want some macbooks\&quot; })\n                .expect(200);\n            expect(response.body).to.deep.equal({\n                chatbotMessage: \&quot;Here are some macbooks I found.\&quot;,\n                productData: null\n            });\n        })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { (2) } to deeply equal { (2) }&quot;,&quot;estack&quot;:&quot;AssertionError: expected { (2) } to deeply equal { (2) }\n    at D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chatbot.test.ts:118:37\n    at Generator.next (&lt;anonymous&gt;)\n    at fulfilled (src\\tests\\integration\\chatbot.test.ts:38:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot; {\n-   \&quot;chatbotMessage\&quot;: \&quot;I found some MacBook options for you! Would you like to see the latest models, or do you have a specific budget or use case in mind?\&quot;\n+   \&quot;chatbotMessage\&quot;: \&quot;Here are some macbooks I found.\&quot;\n   \&quot;productData\&quot;: [null]\n }\n&quot;},&quot;uuid&quot;:&quot;a5573f6e-615c-4647-b27c-932ccbebd57d&quot;,&quot;parentUUID&quot;:&quot;6675d7ff-219c-4ef1-997d-ffa6fc1ce9d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 200 code for working chatbot API and product API&quot;,&quot;fullTitle&quot;:&quot;Chatbot API /api/chatbot POST returns 200 code for working chatbot API and product API&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1683,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const mockProduct = {\n                product_id: \&quot;123\&quot;,\n                source: \&quot;Best Buy\&quot;,\n                title: \&quot;MacBook Pro\&quot;,\n                thumbnail: \&quot;image.jpg\&quot;,\n                extracted_price: 1299,\n                seller_details: { direct_link: \&quot;http://example.com\&quot; },\n                rating: 4.5,\n                reviews: 120\n            };\n            sinon_1.default.stub(AIService_1.AIService, &#x27;chatCompletionGithubModel&#x27;).resolves({\n                chatbotMessage: \&quot;Here are some macbooks I found.\&quot;,\n                productRequested: true,\n                productQuery: \&quot;macbook\&quot;\n            });\n            sinon_1.default.stub(ProductService_1.ProductService, &#x27;searchProducts&#x27;).resolves([mockProduct]);\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/chatbot&#x27;)\n                .send({ message: \&quot;I want some macbooks\&quot; })\n                .expect(200);\n            expect(response.body).to.deep.equal({\n                chatbotMessage: \&quot;Here are some macbooks I found.\&quot;,\n                productData: [{\n                        id: mockProduct.product_id,\n                        source: mockProduct.source,\n                        title: mockProduct.title,\n                        image: mockProduct.thumbnail,\n                        price: mockProduct.extracted_price,\n                        url: mockProduct.seller_details.direct_link,\n                        rating: mockProduct.rating,\n                        reviews: mockProduct.reviews\n                    }]\n            });\n        })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { (2) } to deeply equal { (2) }&quot;,&quot;estack&quot;:&quot;AssertionError: expected { (2) } to deeply equal { (2) }\n    at D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\chatbot.test.ts:147:37\n    at Generator.next (&lt;anonymous&gt;)\n    at fulfilled (src\\tests\\integration\\chatbot.test.ts:38:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot; {\n-   \&quot;chatbotMessage\&quot;: \&quot;I found a MacBook Pro available for $1299 with a good rating of 4.5 stars from over 120 reviews. Would you like more options or details about this model?\&quot;\n+   \&quot;chatbotMessage\&quot;: \&quot;Here are some macbooks I found.\&quot;\n   \&quot;productData\&quot;: [\n     {\n       \&quot;id\&quot;: \&quot;123\&quot;\n       \&quot;image\&quot;: \&quot;image.jpg\&quot;\n&quot;},&quot;uuid&quot;:&quot;e8f1d82f-dd5c-4d16-a9db-c306e2c65c7e&quot;,&quot;parentUUID&quot;:&quot;6675d7ff-219c-4ef1-997d-ffa6fc1ce9d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;21f90b84-f550-44b6-b98d-fbca61ce1317&quot;,&quot;64ff9ead-69b9-441d-aa37-a34d04b790b5&quot;,&quot;ebae96fb-8fa2-43f3-93df-81a409fc292b&quot;],&quot;failures&quot;:[&quot;d388638f-7749-44d6-aee8-8b17e81401cd&quot;,&quot;58af1dda-6a06-45a7-a6c2-8473a3066346&quot;,&quot;afc9ba79-dfb4-4946-899d-fcb0d851a469&quot;,&quot;a5573f6e-615c-4647-b27c-932ccbebd57d&quot;,&quot;e8f1d82f-dd5c-4d16-a9db-c306e2c65c7e&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9645,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;86a1a881-8f19-4de5-9182-14bc6b13f176&quot;,&quot;title&quot;:&quot;Products API&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\products.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\products.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Products API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Products API \&quot;before all\&quot; hook in \&quot;Products API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;app = (0, express_1.default)();\napp.use(&#x27;/api/products&#x27;, products_1.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18e72dfb-a26a-4071-88df-17aa0cd1baac&quot;,&quot;parentUUID&quot;:&quot;86a1a881-8f19-4de5-9182-14bc6b13f176&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Products API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Products API \&quot;after each\&quot; hook in \&quot;Products API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon_1.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;333af162-f446-42b7-93f2-16907bbe791e&quot;,&quot;parentUUID&quot;:&quot;86a1a881-8f19-4de5-9182-14bc6b13f176&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8e146b1e-099d-4926-9b31-08229aee33f6&quot;,&quot;title&quot;:&quot;GET /api/products/search&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\products.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\products.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200 and products for a valid search query&quot;,&quot;fullTitle&quot;:&quot;Products API GET /api/products/search should return 200 and products for a valid search query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeProducts = [\n                {\n                    category: &#x27;Popular products&#x27;,\n                    thumbnail: &#x27;https://example.com/image.jpg&#x27;,\n                    source_logo: &#x27;https://example.com/logo.png&#x27;,\n                    source: &#x27;Best Buy&#x27;,\n                    title: &#x27;HP 14\&quot; Intel Celeron Laptop&#x27;,\n                    rating: 4.2,\n                    reviews: 148,\n                    price: &#x27;$199.99&#x27;,\n                    extracted_price: 199.99,\n                    location: &#x27;Nearby, 13 mi&#x27;,\n                    product_id: &#x27;2197135960910078338&#x27;,\n                    seller_details: [\n                        {\n                            position: 1,\n                            name: &#x27;Best Buy&#x27;,\n                            top_quality_store: true,\n                            payment_methods: &#x27;PayPal, Zip accepted&#x27;,\n                            rating: 4.6,\n                            reviews: 532,\n                            reviews_original: &#x27;(532)&#x27;,\n                            link: &#x27;https://google.com/redirect&#x27;,\n                            direct_link: &#x27;https://bestbuy.com/product&#x27;,\n                            details_and_offers: [{ text: &#x27;5.3 mi  In stock at GainesvilleToday: 10:00 AM - 8:00 PM&#x27; }],\n                            base_price: &#x27;$199.99&#x27;,\n                            additional_price: { shipping: &#x27;See website&#x27; },\n                            total_price: &#x27;$199.99&#x27;,\n                        }\n                    ],\n                },\n            ];\n            sinon_1.default.stub(ProductService_1.ProductService, &#x27;searchProducts&#x27;).resolves(fakeProducts);\n            const res = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/products/search&#x27;)\n                .query({ q: &#x27;Laptop under $400&#x27;, device: &#x27;desktop&#x27;, location: &#x27;Canada&#x27; });\n            (0, chai_1.expect)(res.status).to.equal(200);\n            (0, chai_1.expect)(res.body.success).to.be.true;\n            (0, chai_1.expect)(res.body.products).to.deep.equal(fakeProducts);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bd8190e-5973-4083-826d-370be8d25d04&quot;,&quot;parentUUID&quot;:&quot;8e146b1e-099d-4926-9b31-08229aee33f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if the search query is missing&quot;,&quot;fullTitle&quot;:&quot;Products API GET /api/products/search should return 400 if the search query is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const res = yield (0, supertest_1.default)(app).get(&#x27;/api/products/search&#x27;);\n            (0, chai_1.expect)(res.status).to.equal(400);\n            (0, chai_1.expect)(res.body.success).to.be.false;\n            (0, chai_1.expect)(res.body.error).to.equal(&#x27;Search query is required&#x27;);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39a0526a-5acc-4c7d-9991-60b404a96665&quot;,&quot;parentUUID&quot;:&quot;8e146b1e-099d-4926-9b31-08229aee33f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if the ProductService throws an error&quot;,&quot;fullTitle&quot;:&quot;Products API GET /api/products/search should return 500 if the ProductService throws an error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(ProductService_1.ProductService, &#x27;searchProducts&#x27;).throws(new Error(&#x27;SerpAPI error&#x27;));\n            const res = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/products/search&#x27;)\n                .query({ q: &#x27;Laptop&#x27; });\n            (0, chai_1.expect)(res.status).to.equal(500);\n            (0, chai_1.expect)(res.body.success).to.be.false;\n            (0, chai_1.expect)(res.body.error).to.equal(&#x27;SerpAPI error&#x27;);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d5fd47f-e39d-4abb-aada-07952f8c5ee2&quot;,&quot;parentUUID&quot;:&quot;8e146b1e-099d-4926-9b31-08229aee33f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3bd8190e-5973-4083-826d-370be8d25d04&quot;,&quot;39a0526a-5acc-4c7d-9991-60b404a96665&quot;,&quot;9d5fd47f-e39d-4abb-aada-07952f8c5ee2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1dece940-a17c-4a46-8ed5-5b510f8952ad&quot;,&quot;title&quot;:&quot;Profile API&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\profile.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\profile.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Profile API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Profile API \&quot;before all\&quot; hook in \&quot;Profile API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;app = (0, express_1.default)();\napp.use(express_1.default.json());\napp.use(&#x27;/api/profiles&#x27;, profile_1.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17784f89-5b01-460e-9911-f4f3d1bfe50d&quot;,&quot;parentUUID&quot;:&quot;1dece940-a17c-4a46-8ed5-5b510f8952ad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Profile API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Profile API \&quot;after each\&quot; hook in \&quot;Profile API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon_1.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f27b6ea-3abf-4ea0-a94c-bcf1838e5f14&quot;,&quot;parentUUID&quot;:&quot;1dece940-a17c-4a46-8ed5-5b510f8952ad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1c0604f5-e3d1-4df9-a928-3e96c1b4b7a1&quot;,&quot;title&quot;:&quot;/api/profiles/verify/:token GET&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\profile.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\profile.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 for missing token&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/verify/:token GET should return 400 for missing token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/verify&#x27;)\n                .query({})\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;token missing from params&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94d41c48-d922-4d71-91c5-dd0951bbf0fc&quot;,&quot;parentUUID&quot;:&quot;1c0604f5-e3d1-4df9-a928-3e96c1b4b7a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for failing to get user&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/verify/:token GET should return 500 for failing to get user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByToken&#x27;).throws(new Error(\&quot;Some error related to getting user\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/verify/test123&#x27;)\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unable to get user&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61a314c3-bcb3-4a1d-9cc7-3c9019989bef&quot;,&quot;parentUUID&quot;:&quot;1c0604f5-e3d1-4df9-a928-3e96c1b4b7a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 for not finding valid user&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/verify/:token GET should return 404 for not finding valid user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByToken&#x27;).resolves(null);\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/verify/test123&#x27;)\n                .expect(404);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Invalid or expired verification token&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1828e4a-8523-477e-a41e-bb5bf92d2790&quot;,&quot;parentUUID&quot;:&quot;1c0604f5-e3d1-4df9-a928-3e96c1b4b7a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for failing to verify email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/verify/:token GET should return 500 for failing to verify email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeDate = new Date();\n            const fakeUser = {\n                name: &#x27;test name&#x27;,\n                email: &#x27;test@example.com&#x27;,\n                isEmailVerified: true,\n                verificationToken: &#x27;test123&#x27;,\n                verificationTokenExpires: fakeDate,\n                createdAt: fakeDate,\n                updatedAt: fakeDate,\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByToken&#x27;).resolves(fakeUser);\n            sinon_1.default.stub(UserService_1.UserService, &#x27;verifyEmail&#x27;).throws(new Error(\&quot;Some error related to verifying email\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/verify/test123&#x27;)\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unable to verify email&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4570a93b-ed42-4202-acaf-ddc3c6d3fe6b&quot;,&quot;parentUUID&quot;:&quot;1c0604f5-e3d1-4df9-a928-3e96c1b4b7a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 200 for successfully verifying email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/verify/:token GET should return 200 for successfully verifying email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeDate = new Date();\n            const fakeUser = {\n                name: &#x27;test name&#x27;,\n                email: &#x27;test@example.com&#x27;,\n                isEmailVerified: true,\n                verificationToken: &#x27;test123&#x27;,\n                verificationTokenExpires: fakeDate,\n                createdAt: fakeDate,\n                updatedAt: fakeDate,\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByToken&#x27;).resolves(fakeUser);\n            sinon_1.default.stub(UserService_1.UserService, &#x27;verifyEmail&#x27;).resolves();\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/verify/test123&#x27;)\n                .expect(200);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: true,\n                message: &#x27;Email verified successfully&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4196cec4-214f-4586-ac0a-5896e2c304a0&quot;,&quot;parentUUID&quot;:&quot;1c0604f5-e3d1-4df9-a928-3e96c1b4b7a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;94d41c48-d922-4d71-91c5-dd0951bbf0fc&quot;,&quot;61a314c3-bcb3-4a1d-9cc7-3c9019989bef&quot;,&quot;b1828e4a-8523-477e-a41e-bb5bf92d2790&quot;,&quot;4570a93b-ed42-4202-acaf-ddc3c6d3fe6b&quot;,&quot;4196cec4-214f-4586-ac0a-5896e2c304a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1cff87d5-70ef-4371-a890-5f08087c5c51&quot;,&quot;title&quot;:&quot;/api/profiles/resend-verification POST&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\profile.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\profile.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 for missing email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 400 for missing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({})\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;email is required&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00b858ee-f6b7-4e2d-9fc4-b3ada77f780f&quot;,&quot;parentUUID&quot;:&quot;1cff87d5-70ef-4371-a890-5f08087c5c51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for non string email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 400 for non string email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: 123 })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;email must be a string&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1081f55-6aa6-4648-af14-eb3718abafff&quot;,&quot;parentUUID&quot;:&quot;1cff87d5-70ef-4371-a890-5f08087c5c51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for unknown error while getting user&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 500 for unknown error while getting user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).throws(new Error(\&quot;Some error related to getting user\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: &#x27;test@example.com&#x27; })\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unable to get user while verifying email&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8a5e563-95ed-40b2-9a54-44771aaaadf4&quot;,&quot;parentUUID&quot;:&quot;1cff87d5-70ef-4371-a890-5f08087c5c51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 for unknown user&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 404 for unknown user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(null);\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: &#x27;test@example.com&#x27; })\n                .expect(404);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;user cannot be found&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;099c0e5b-c905-4f42-9189-eae378ad652b&quot;,&quot;parentUUID&quot;:&quot;1cff87d5-70ef-4371-a890-5f08087c5c51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for user with verified email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 400 for user with verified email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeUserWithoutPassword = {\n                _id: &#x27;existing_id&#x27;,\n                name: &#x27;Existing User&#x27;,\n                email: &#x27;existing@example.com&#x27;,\n                password: &#x27;hashed_password&#x27;,\n                isEmailVerified: true\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(fakeUserWithoutPassword);\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: &#x27;test@example.com&#x27; })\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;email is already verified&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7df8ea30-e81b-4599-874c-f505aa791ba6&quot;,&quot;parentUUID&quot;:&quot;1cff87d5-70ef-4371-a890-5f08087c5c51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for unknown error during resending verification email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 500 for unknown error during resending verification email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeUserWithoutPassword = {\n                _id: &#x27;existing_id&#x27;,\n                name: &#x27;Existing User&#x27;,\n                email: &#x27;existing@example.com&#x27;,\n                password: &#x27;hashed_password&#x27;,\n                isEmailVerified: false\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(fakeUserWithoutPassword);\n            sinon_1.default.stub(UserService_1.UserService, &#x27;resendVerificationEmail&#x27;).throws(new Error(\&quot;Some error related to resending verification email\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: &#x27;test@example.com&#x27; })\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unable to resend verification email&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1aff3571-c8ce-4510-8504-88d560a5ea86&quot;,&quot;parentUUID&quot;:&quot;1cff87d5-70ef-4371-a890-5f08087c5c51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 200 for successfully resending email&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/resend-verification POST should return 200 for successfully resending email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeUserWithoutPassword = {\n                _id: &#x27;existing_id&#x27;,\n                name: &#x27;Existing User&#x27;,\n                email: &#x27;existing@example.com&#x27;,\n                password: &#x27;hashed_password&#x27;,\n                isEmailVerified: false\n            };\n            sinon_1.default.stub(UserService_1.UserService, &#x27;getUserByEmail&#x27;).resolves(fakeUserWithoutPassword);\n            sinon_1.default.stub(UserService_1.UserService, &#x27;resendVerificationEmail&#x27;).resolves();\n            const response = yield (0, supertest_1.default)(app)\n                .post(&#x27;/api/profiles/resend-verification&#x27;)\n                .send({ email: &#x27;test@example.com&#x27; })\n                .expect(200);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: true,\n                message: &#x27;Verification email sent&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3af1f15f-67e5-414d-a9b4-79d54c36c098&quot;,&quot;parentUUID&quot;:&quot;1cff87d5-70ef-4371-a890-5f08087c5c51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;00b858ee-f6b7-4e2d-9fc4-b3ada77f780f&quot;,&quot;b1081f55-6aa6-4648-af14-eb3718abafff&quot;,&quot;d8a5e563-95ed-40b2-9a54-44771aaaadf4&quot;,&quot;099c0e5b-c905-4f42-9189-eae378ad652b&quot;,&quot;7df8ea30-e81b-4599-874c-f505aa791ba6&quot;,&quot;1aff3571-c8ce-4510-8504-88d560a5ea86&quot;,&quot;3af1f15f-67e5-414d-a9b4-79d54c36c098&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;title&quot;:&quot;/api/profiles/:userId GET&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\profile.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\profile.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;/api/profiles/:userId GET\&quot;&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId GET \&quot;before each\&quot; hook in \&quot;/api/profiles/:userId GET\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;originalSecret = process.env.JWT_SECRET;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e2a143a-8629-4dea-b84d-ad53f0efe026&quot;,&quot;parentUUID&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;/api/profiles/:userId GET\&quot;&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId GET \&quot;after each\&quot; hook in \&quot;/api/profiles/:userId GET\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;process.env.JWT_SECRET = originalSecret; // restore&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3eb245f3-6817-441b-919f-8da71768ee27&quot;,&quot;parentUUID&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 401 for no auth token on header&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId GET should return 401 for no auth token on header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/&#x27;)\n                .expect(401);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;No auth token in header&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c71480cf-73a5-4724-bc6d-a64142b88382&quot;,&quot;parentUUID&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for unconfigured JWT&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId GET should return 500 for unconfigured JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            delete process.env.JWT_SECRET;\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/userId123&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer sometoken`)\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;JWT not configured&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4385b5ae-b7a9-4157-bb96-c2a0d9380ccb&quot;,&quot;parentUUID&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 for JWT verification error&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId GET should return 401 for JWT verification error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(jsonwebtoken_1.default, &#x27;verify&#x27;).throws(new jsonwebtoken_1.JsonWebTokenError(\&quot;Some JWT verification error\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/userId123&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer sometoken`)\n                .expect(401);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Invalid JWT&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17b4945f-6e1a-40d1-b769-c0583d49bc4b&quot;,&quot;parentUUID&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for unknown error JWT&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId GET should return 500 for unknown error JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(jsonwebtoken_1.default, &#x27;verify&#x27;).throws(new Error(\&quot;Some other error during JWT verification\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/userId123&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer sometoken`)\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unknown error&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37a014b5-d789-44d6-8ac2-9715f94baf7c&quot;,&quot;parentUUID&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for missing userId on params&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId GET should return 400 for missing userId on params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(jsonwebtoken_1.default, &#x27;verify&#x27;).resolves();\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer ${validToken}`)\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;userId missing from params&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d545800-ab69-4d93-b708-26f31c1016aa&quot;,&quot;parentUUID&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for error during getting profile&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId GET should return 500 for error during getting profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            /** Physically verify token without mocking */\n            sinon_1.default.stub(ProfileService_1.ProfileService, &#x27;getProfileByUserId&#x27;).throws(new Error(\&quot;Some error related to getting user\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/userId123&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer ${validToken}`)\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unknown error during getting profile&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a09d9c35-6785-4485-bd17-6df4c36bb49b&quot;,&quot;parentUUID&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 for missing profile for userId&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId GET should return 404 for missing profile for userId&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            /** Physically verify token without mocking */\n            sinon_1.default.stub(ProfileService_1.ProfileService, &#x27;getProfileByUserId&#x27;).resolves(null);\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/userId123&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer ${validToken}`)\n                .expect(404);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unable to get profile with userId&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9316f3a-bebd-446e-90cf-b6b827b67b1a&quot;,&quot;parentUUID&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 200 for successfully getting profile&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId GET should return 200 for successfully getting profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            /** Physically verify token without mocking */\n            const fakeProfile = {\n                _id: &#x27;test id&#x27;,\n                userId: &#x27;test userId&#x27;,\n                storage_preference: &#x27;123GB&#x27;,\n                RAM_preference: &#x27;8GB&#x27;,\n                brand_preference: &#x27;Apple, Samsung, Sony&#x27;,\n                min_budget: 50,\n                max_budget: 500,\n                rating_preference: 5,\n                country: &#x27;Canada&#x27;,\n                address: {\n                    street: &#x27;test street&#x27;,\n                    city: &#x27;test city&#x27;,\n                    state: &#x27;test state&#x27;,\n                    zipCode: &#x27;test zip code&#x27;,\n                    country: &#x27;test country&#x27;,\n                },\n                createdAt: (new Date()).toISOString(),\n                updatedAt: (new Date()).toISOString(),\n                email: &#x27;test@example.com&#x27;,\n            };\n            sinon_1.default.stub(ProfileService_1.ProfileService, &#x27;getProfileByUserId&#x27;).resolves(fakeProfile);\n            const response = yield (0, supertest_1.default)(app)\n                .get(&#x27;/api/profiles/userId123&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer ${validToken}`)\n                .expect(200);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: true,\n                message: &#x27;Successfully retrieved profile&#x27;,\n                data: fakeProfile\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa46c535-b088-4f77-ab59-636ec4d848c8&quot;,&quot;parentUUID&quot;:&quot;c6206da1-d1c2-48f5-bec9-1b49b0dfe0c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c71480cf-73a5-4724-bc6d-a64142b88382&quot;,&quot;4385b5ae-b7a9-4157-bb96-c2a0d9380ccb&quot;,&quot;17b4945f-6e1a-40d1-b769-c0583d49bc4b&quot;,&quot;37a014b5-d789-44d6-8ac2-9715f94baf7c&quot;,&quot;9d545800-ab69-4d93-b708-26f31c1016aa&quot;,&quot;a09d9c35-6785-4485-bd17-6df4c36bb49b&quot;,&quot;b9316f3a-bebd-446e-90cf-b6b827b67b1a&quot;,&quot;aa46c535-b088-4f77-ab59-636ec4d848c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;title&quot;:&quot;/api/profiles/:userId PATCH&quot;,&quot;fullFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\src\\tests\\integration\\profile.test.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\integration\\profile.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;/api/profiles/:userId PATCH\&quot;&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH \&quot;before each\&quot; hook in \&quot;/api/profiles/:userId PATCH\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;originalSecret = process.env.JWT_SECRET;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a68241a1-36a8-495b-b2b2-e34a7ad12eb1&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;/api/profiles/:userId PATCH\&quot;&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH \&quot;after each\&quot; hook in \&quot;/api/profiles/:userId PATCH\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;process.env.JWT_SECRET = originalSecret; // restore&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90808348-6341-49db-9688-95145e545084&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 401 for no auth token on header&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH should return 401 for no auth token on header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield (0, supertest_1.default)(app)\n                .patch(&#x27;/api/profiles/&#x27;)\n                .expect(401);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;No auth token in header&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d801ff2d-3782-479c-bf59-f77d854c23fc&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for unconfigured JWT&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH should return 500 for unconfigured JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            delete process.env.JWT_SECRET;\n            const response = yield (0, supertest_1.default)(app)\n                .patch(&#x27;/api/profiles/userId123&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer sometoken`)\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;JWT not configured&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11b164f7-973d-4006-9312-12f486614dee&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 for JWT verification error&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH should return 401 for JWT verification error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(jsonwebtoken_1.default, &#x27;verify&#x27;).throws(new jsonwebtoken_1.JsonWebTokenError(\&quot;Some JWT verification error\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .patch(&#x27;/api/profiles/userId123&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer sometoken`)\n                .expect(401);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Invalid JWT&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e2b178b-8101-4490-aa2c-9780d98ba236&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for unknown error JWT&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH should return 500 for unknown error JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(jsonwebtoken_1.default, &#x27;verify&#x27;).throws(new Error(\&quot;Some other error during JWT verification\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .patch(&#x27;/api/profiles/userId123&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer sometoken`)\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unknown error&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b2f937f-478a-440e-9056-563986613120&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for missing userId on params&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH should return 400 for missing userId on params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(jsonwebtoken_1.default, &#x27;verify&#x27;).resolves();\n            const response = yield (0, supertest_1.default)(app)\n                .patch(&#x27;/api/profiles/&#x27;)\n                .set(&#x27;Authorization&#x27;, `Bearer ${validToken}`)\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;userId missing from params&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e561d6e3-3032-4117-ad29-5e98f3c2e985&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for missing updateData in body&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH should return 400 for missing updateData in body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            sinon_1.default.stub(jsonwebtoken_1.default, &#x27;verify&#x27;).resolves();\n            const response = yield (0, supertest_1.default)(app)\n                .patch(&#x27;/api/profiles/userId123&#x27;)\n                .send({ profileData: null })\n                .set(&#x27;Authorization&#x27;, `Bearer ${validToken}`)\n                .expect(400);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;updated profile missing from body&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6078f34-8f31-4735-9372-20ffc1f7da34&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for error during getting profile&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH should return 500 for error during getting profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeProfileData = {\n                _id: &#x27;test id&#x27;,\n                userId: &#x27;test userId&#x27;,\n                storage_preference: &#x27;123GB&#x27;,\n                RAM_preference: &#x27;8GB&#x27;,\n                brand_preference: &#x27;Apple, Samsung, Sony&#x27;,\n                min_budget: 50,\n                max_budget: 500,\n                rating_preference: 5,\n                country: &#x27;Canada&#x27;,\n                address: {\n                    street: &#x27;test street&#x27;,\n                    city: &#x27;test city&#x27;,\n                    state: &#x27;test state&#x27;,\n                    zipCode: &#x27;test zip code&#x27;,\n                    country: &#x27;test country&#x27;,\n                },\n                createdAt: (new Date()).toISOString(),\n                updatedAt: (new Date()).toISOString(),\n                email: &#x27;test@example.com&#x27;,\n            };\n            /** Physically verify token without mocking */\n            sinon_1.default.stub(ProfileService_1.ProfileService, &#x27;getProfileByUserId&#x27;).throws(new Error(\&quot;Some error related to getting user\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .patch(&#x27;/api/profiles/userId123&#x27;)\n                .send({ profileData: fakeProfileData })\n                .set(&#x27;Authorization&#x27;, `Bearer ${validToken}`)\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unknown error during getting profile&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c16cb653-91d7-461e-a416-df9783f160f1&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 for missing profile for userId&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH should return 404 for missing profile for userId&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            /** Physically verify token without mocking */\n            sinon_1.default.stub(ProfileService_1.ProfileService, &#x27;getProfileByUserId&#x27;).resolves(null);\n            const fakeProfileData = {\n                _id: &#x27;test id&#x27;,\n                userId: &#x27;test userId&#x27;,\n                storage_preference: &#x27;123GB&#x27;,\n                RAM_preference: &#x27;8GB&#x27;,\n                brand_preference: &#x27;Apple, Samsung, Sony&#x27;,\n                min_budget: 50,\n                max_budget: 500,\n                rating_preference: 5,\n                country: &#x27;Canada&#x27;,\n                address: {\n                    street: &#x27;test street&#x27;,\n                    city: &#x27;test city&#x27;,\n                    state: &#x27;test state&#x27;,\n                    zipCode: &#x27;test zip code&#x27;,\n                    country: &#x27;test country&#x27;,\n                },\n                createdAt: (new Date()).toISOString(),\n                updatedAt: (new Date()).toISOString(),\n                email: &#x27;test@example.com&#x27;,\n            };\n            const response = yield (0, supertest_1.default)(app)\n                .patch(&#x27;/api/profiles/userId123&#x27;)\n                .send({ profileData: fakeProfileData })\n                .set(&#x27;Authorization&#x27;, `Bearer ${validToken}`)\n                .expect(404);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;No profile found&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e740c93-b860-40a7-a03c-7fc0a1b778c4&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 for error with updating profile&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH should return 500 for error with updating profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeProfileData = {\n                _id: &#x27;test id&#x27;,\n                userId: &#x27;test userId&#x27;,\n                storage_preference: &#x27;1TB&#x27;,\n                RAM_preference: &#x27;32GB&#x27;,\n                brand_preference: &#x27;NVidia, Intel&#x27;,\n                min_budget: 200,\n                max_budget: 1000,\n                rating_preference: 3,\n                country: &#x27;US&#x27;,\n                address: {\n                    street: &#x27;test street&#x27;,\n                    city: &#x27;test city&#x27;,\n                    state: &#x27;test state&#x27;,\n                    zipCode: &#x27;test zip code&#x27;,\n                    country: &#x27;test country&#x27;,\n                },\n                createdAt: (new Date()).toISOString(),\n                updatedAt: (new Date()).toISOString(),\n                email: &#x27;test@example.com&#x27;,\n            };\n            const existingProfileData = {\n                _id: &#x27;test id&#x27;,\n                userId: &#x27;test userId&#x27;,\n                storage_preference: &#x27;123GB&#x27;,\n                RAM_preference: &#x27;8GB&#x27;,\n                brand_preference: &#x27;Apple, Samsung, Sony&#x27;,\n                min_budget: 50,\n                max_budget: 500,\n                rating_preference: 5,\n                country: &#x27;Canada&#x27;,\n                address: {\n                    street: &#x27;test street&#x27;,\n                    city: &#x27;test city&#x27;,\n                    state: &#x27;test state&#x27;,\n                    zipCode: &#x27;test zip code&#x27;,\n                    country: &#x27;test country&#x27;,\n                },\n                createdAt: (new Date()).toISOString(),\n                updatedAt: (new Date()).toISOString(),\n                email: &#x27;test@example.com&#x27;,\n            };\n            /** Physically verify token without mocking */\n            sinon_1.default.stub(ProfileService_1.ProfileService, &#x27;getProfileByUserId&#x27;).resolves(existingProfileData);\n            sinon_1.default.stub(ProfileService_1.ProfileService, &#x27;updateProfile&#x27;).throws(new Error(\&quot;Some error related to updating profile\&quot;));\n            const response = yield (0, supertest_1.default)(app)\n                .patch(&#x27;/api/profiles/userId123&#x27;)\n                .send({ profileData: fakeProfileData })\n                .set(&#x27;Authorization&#x27;, `Bearer ${validToken}`)\n                .expect(500);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: false,\n                error: &#x27;Unable to update profile&#x27;\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b387b48-a1d1-4c6f-b5d9-5fce39e3b993&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 200 for successfully updating profile&quot;,&quot;fullTitle&quot;:&quot;Profile API /api/profiles/:userId PATCH should return 200 for successfully updating profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const fakeProfileData = {\n                _id: &#x27;test id&#x27;,\n                userId: &#x27;userId123&#x27;,\n                storage_preference: &#x27;1TB&#x27;,\n                RAM_preference: &#x27;32GB&#x27;,\n                brand_preference: &#x27;NVidia, Intel&#x27;,\n                min_budget: 200,\n                max_budget: 1000,\n                rating_preference: 3,\n                country: &#x27;US&#x27;,\n                address: {\n                    street: &#x27;test street&#x27;,\n                    city: &#x27;test city&#x27;,\n                    state: &#x27;test state&#x27;,\n                    zipCode: &#x27;test zip code&#x27;,\n                    country: &#x27;test country&#x27;,\n                },\n                createdAt: (new Date()).toISOString(),\n                updatedAt: (new Date()).toISOString(),\n                email: &#x27;test@example.com&#x27;,\n            };\n            const existingProfileData = {\n                _id: &#x27;test id&#x27;,\n                userId: &#x27;userId123&#x27;,\n                storage_preference: &#x27;123GB&#x27;,\n                RAM_preference: &#x27;8GB&#x27;,\n                brand_preference: &#x27;Apple, Samsung, Sony&#x27;,\n                min_budget: 50,\n                max_budget: 500,\n                rating_preference: 5,\n                country: &#x27;Canada&#x27;,\n                address: {\n                    street: &#x27;test street&#x27;,\n                    city: &#x27;test city&#x27;,\n                    state: &#x27;test state&#x27;,\n                    zipCode: &#x27;test zip code&#x27;,\n                    country: &#x27;test country&#x27;,\n                },\n                createdAt: (new Date()).toISOString(),\n                updatedAt: (new Date()).toISOString(),\n                email: &#x27;test@example.com&#x27;,\n            };\n            /** Physically verify token without mocking */\n            sinon_1.default.stub(ProfileService_1.ProfileService, &#x27;getProfileByUserId&#x27;).resolves(existingProfileData);\n            sinon_1.default.stub(ProfileService_1.ProfileService, &#x27;updateProfile&#x27;).resolves(fakeProfileData);\n            const response = yield (0, supertest_1.default)(app)\n                .patch(&#x27;/api/profiles/userId123&#x27;)\n                .send({ profileData: fakeProfileData })\n                .set(&#x27;Authorization&#x27;, `Bearer ${validToken}`)\n                .expect(200);\n            (0, chai_1.expect)(response.body).to.deep.equal({\n                success: true,\n                message: &#x27;Profile updated successfully&#x27;,\n                data: fakeProfileData\n            });\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2f23874-ad9a-4ed6-ac56-b2da1b20e1d4&quot;,&quot;parentUUID&quot;:&quot;c8890327-293a-435e-b0a7-dba281a57922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d801ff2d-3782-479c-bf59-f77d854c23fc&quot;,&quot;11b164f7-973d-4006-9312-12f486614dee&quot;,&quot;1e2b178b-8101-4490-aa2c-9780d98ba236&quot;,&quot;5b2f937f-478a-440e-9056-563986613120&quot;,&quot;e561d6e3-3032-4117-ad29-5e98f3c2e985&quot;,&quot;a6078f34-8f31-4735-9372-20ffc1f7da34&quot;,&quot;c16cb653-91d7-461e-a416-df9783f160f1&quot;,&quot;1e740c93-b860-40a7-a03c-7fc0a1b778c4&quot;,&quot;5b387b48-a1d1-4c6f-b5d9-5fce39e3b993&quot;,&quot;a2f23874-ad9a-4ed6-ac56-b2da1b20e1d4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:74,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:20000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.7.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;integration-tests&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;mochawesome-integration&quot;,&quot;reportFilename&quot;:&quot;integration-tests&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;integration-tests&quot;,&quot;reportDir&quot;:&quot;mochawesome-integration&quot;,&quot;reportTitle&quot;:&quot;server&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-integration\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\mochawesome-integration\\integration-tests.json&quot;,&quot;htmlFile&quot;:&quot;D:\\Uni\\C455\\Project\\team10\\server\\mochawesome-integration\\integration-tests.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>